
def isCI = System.getenv("CI") != null

gradleEnterprise {
  server = "https://ge.apollographql.com"
  allowUntrustedServer = false

  buildScan {
    publishAlways()
    publishIfAuthenticated()

    uploadInBackground = !isCI

    capture {
      taskInputFiles = true
    }
  }
}


buildCache {
  local {
    enabled = false
  }
  remote(HttpBuildCache) {
    url = 'https://ge.apollographql.com/cache/exp4/'
    enabled = true
    push = isCI
  }
}