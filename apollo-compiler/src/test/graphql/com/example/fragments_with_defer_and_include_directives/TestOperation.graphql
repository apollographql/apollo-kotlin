query SpreadSingleWithDefer {
  hero {
    ...DroidDetails @defer
  }
}

query SpreadMultipleWithDefer {
  hero {
    ...DroidDetails @defer(label: "first")
    ...DroidDetails @defer(label: "second")
  }
}

query SpreadMultipleWithDeferAndInclude($cond1: Boolean!, $cond2: Boolean!, $cond3: Boolean!, $cond4: Boolean!) {
  hero {
    ...DroidDetails @include(if: $cond1)
    ...DroidDetails @skip(if: $cond2)
    ...DroidDetails @defer(label: "first")
    ...DroidDetails @defer(label: "second")
    ...DroidDetails @defer(label: "third") @include(if: $cond3)
    ...DroidDetails @defer(label: "fourth") @skip(if: $cond4)
  }
}

fragment DroidDetails on Droid {
  name
}

query SpreadMultipleWithDeferWithIf($cond: Boolean!) {
  hero {
    ...CharacterDetails @defer(label: "first" if: false)
    ...CharacterDetails2 @defer(label: "second" if: true)
    ...CharacterDetails3 @defer(label: "third" if: $cond)
  }
}

fragment CharacterDetails on Droid {
  name
}

fragment CharacterDetails2 on Droid {
  id
}

fragment CharacterDetails3 on Droid {
  birthDate
}

query InlineSingleWithDefer {
  hero {
    ... on Droid @defer {
      name
    }
  }
}

query InlineMultipleWithDefer {
  hero {
    ... on Droid @defer(label: "first") {
      name
    }

    ... on Droid @defer(label: "second") {
      id
    }
  }
}

query InlineMultipleWithDeferAndInclude($cond1: Boolean!, $cond2: Boolean!, $cond3: Boolean!, $cond4: Boolean!) {
  hero {
    ... on Droid @include(if: $cond1) {
      name
    }
    ... on Droid @skip(if: $cond2) {
      id
    }
    ... on Droid @defer(label: "first") {
      name
    }
    ... on Droid @defer(label: "second") {
      id
    }
    ... on Droid @defer(label: "third") @include(if: $cond3) {
      name
    }
    ... on Droid @defer(label: "fourth") @skip(if: $cond4) {
      id
    }
  }
}

query InlineMultipleWithDeferWithIf($cond: Boolean!) {
  hero {
    ... on Character @defer(label: "first" if: false) {
      id
    }

    ... on Character @defer(label: "second" if: true) {
      name
    }

    ... on Character @defer(label: "third" if: $cond) {
      name
    }
  }
}
